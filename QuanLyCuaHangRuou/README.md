# ?? Qu?n Lý C?a Hàng R??u

<div align="center">

![.NET Framework](https://img.shields.io/badge/.NET%20Framework-4.7.2-purple?style=for-the-badge&logo=dotnet)
![Entity Framework](https://img.shields.io/badge/Entity%20Framework-6.x-blue?style=for-the-badge)
![Windows Forms](https://img.shields.io/badge/Windows%20Forms-App-green?style=for-the-badge&logo=windows)
![SQL Server](https://img.shields.io/badge/SQL%20Server-Database-red?style=for-the-badge&logo=microsoftsqlserver)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)

**?ng d?ng qu?n lý c?a hàng r??u toàn di?n v?i giao di?n Windows Forms**

[Tính n?ng](#-tính-n?ng) •
[Cài ??t](#-cài-??t) •
[Ki?n trúc](#-ki?n-trúc) •
[H??ng d?n s? d?ng](#-h??ng-d?n-s?-d?ng) •
[?óng góp](#-?óng-góp)

</div>

---

## ?? Gi?i thi?u

**Qu?n Lý C?a Hàng R??u** là ?ng d?ng desktop ???c phát tri?n trên n?n t?ng .NET Framework 4.7.2 v?i Windows Forms, giúp qu?n lý toàn di?n ho?t ??ng kinh doanh c?a c?a hàng r??u bao g?m:

- Qu?n lý s?n ph?m ?? u?ng
- Qu?n lý khách hàng
- Qu?n lý nhân viên và phân quy?n
- Bán hàng và xu?t hóa ??n
- D?ch v? ký g?i r??u
- Báo cáo doanh thu và t?n kho

---

## ? Tính n?ng

### ?? H? th?ng xác th?c & phân quy?n

| Vai trò | Mô t? | Quy?n h?n |
|---------|-------|-----------|
| **ADMIN** | Qu?n tr? viên | Toàn quy?n h? th?ng |
| **MANAGER** | Qu?n lý | Qu?n lý danh m?c, nhân viên, xem báo cáo |
| **STAFF** | Nhân viên bán hàng | Bán hàng, qu?n lý khách hàng |
| **WAREHOUSE** | Nhân viên kho | Qu?n lý kho, nh?p xu?t |

### ?? Qu?n lý danh m?c

- **?? u?ng**: Thêm, s?a, xóa, tìm ki?m s?n ph?m r??u
- **Khách hàng**: Qu?n lý thông tin khách hàng thân thi?t
- **Nhân viên**: Qu?n lý nhân s? v?i tài kho?n ??ng nh?p

### ?? Nghi?p v? kinh doanh

- **Bán hàng**: Giao di?n bán hàng tr?c quan v?i gi? hàng
- **Ký g?i r??u**: D?ch v? l?u tr? r??u cho khách hàng
- **Hóa ??n**: Xu?t hóa ??n HTML/Excel, in ?n

### ?? Báo cáo th?ng kê

- **Doanh thu**: Báo cáo theo kho?ng th?i gian
- **T?n kho**: Ki?m soát s? l??ng s?n ph?m
- **Xu?t Excel**: Export báo cáo ra file Excel

---

## ?? Cài ??t

### Yêu c?u h? th?ng

- **H? ?i?u hành**: Windows 7 SP1 tr? lên
- **Framework**: .NET Framework 4.7.2
- **Database**: SQL Server 2014 tr? lên
- **IDE**: Visual Studio 2019/2022 (?? phát tri?n)

### Các b??c cài ??t

#### 1. Clone repository

```bash
git clone https://github.com/Terence-0310/QLCuaHang.git
cd QLCuaHang
```

#### 2. C?u hình Database

1. M? SQL Server Management Studio
2. T?o database m?i ho?c restore t? file backup
3. C?p nh?t connection string trong `App.config`:

```xml
<connectionStrings>
  <add name="Model1" 
       connectionString="data source=YOUR_SERVER;initial catalog=QuanLyCuaHangRuou;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework" 
       providerName="System.Data.SqlClient" />
</connectionStrings>
```

#### 3. Build và ch?y

1. M? solution `QuanLyCuaHangRuou.sln` trong Visual Studio
2. Restore NuGet packages
3. Build solution (Ctrl + Shift + B)
4. Ch?y ?ng d?ng (F5)

#### 4. ??ng nh?p m?c ??nh

```
Username: admin
Password: admin123
```

---

## ?? Ki?n trúc

D? án ???c t? ch?c theo mô hình **3-Layer Architecture**:

```
QuanLyCuaHangRuou/
?
??? ?? GUI/                     # Presentation Layer
?   ??? FrmLogin.cs             # Form ??ng nh?p
?   ??? FrmMain.cs              # Form chính (menu)
?   ??? FrmDoUong.cs            # Qu?n lý ?? u?ng
?   ??? FrmKhachHang.cs         # Qu?n lý khách hàng
?   ??? FrmNhanVien.cs          # Qu?n lý nhân viên
?   ??? FrmBanHang.cs           # Bán hàng
?   ??? FrmKyGuiRuou.cs         # Ký g?i r??u
?   ??? FrmBaoCaoDoanhThu.cs    # Báo cáo doanh thu
?   ??? FrmBaoCaoTonKho.cs      # Báo cáo t?n kho
?   ??? FrmLichSuHoaDon.cs      # L?ch s? hóa ??n
?   ??? FrmXemHoaDon.cs         # Xem chi ti?t hóa ??n
?
??? ?? BUS/                     # Business Service Layer (Facade)
?   ??? AuthBus.cs              # Service xác th?c
?   ??? DoUongBus.cs            # Service ?? u?ng
?   ??? KhachHangBus.cs         # Service khách hàng
?   ??? NhanVienBus.cs          # Service nhân viên
?   ??? BanHangBus.cs           # Service bán hàng
?   ??? KyGuiRuouBus.cs         # Service ký g?i
?   ??? HoaDonBus.cs            # Service hóa ??n
?   ??? ReportBus.cs            # Service báo cáo
?   ??? BusResult.cs            # K?t qu? tr? v? chu?n
?
??? ?? BLL/                     # Business Logic Layer
?   ??? AuthBll.cs              # Logic xác th?c
?   ??? DoUongBll.cs            # Logic ?? u?ng
?   ??? KhachHangBll.cs         # Logic khách hàng
?   ??? NhanVienBll.cs          # Logic nhân viên
?   ??? BanHangBll.cs           # Logic bán hàng
?   ??? KyGuiRuouBll.cs         # Logic ký g?i
?   ??? ReportBll.cs            # Logic báo cáo
?
??? ?? DAL/                     # Data Access Layer
?   ??? DbConfig.cs             # C?u hình DbContext
?   ??? AuthDal.cs              # Truy c?p xác th?c
?   ??? DoUongDal.cs            # Truy c?p ?? u?ng
?   ??? KhachHangDal.cs         # Truy c?p khách hàng
?   ??? NhanVienDal.cs          # Truy c?p nhân viên
?   ??? BanHangDal.cs           # Truy c?p bán hàng
?   ??? KyGuiRuouDal.cs         # Truy c?p ký g?i
?   ??? HoaDonDal.cs            # Truy c?p hóa ??n
?   ??? ReportDal.cs            # Truy c?p báo cáo
?
??? ?? Models/                  # Entity Models
?   ??? Model1.cs               # DbContext (EF)
?   ??? DoUong.cs               # Entity ?? u?ng
?   ??? KhachHang.cs            # Entity khách hàng
?   ??? NhanVien.cs             # Entity nhân viên
?   ??? HoaDon.cs               # Entity hóa ??n
?   ??? ChiTietHoaDon.cs        # Entity chi ti?t H?
?   ??? KyGuiRuou.cs            # Entity ký g?i
?   ??? TaiKhoan.cs             # Entity tài kho?n
?   ??? VaiTro.cs               # Entity vai trò
?   ??? LoaiDoUong.cs           # Entity lo?i ?? u?ng
?
??? ?? Common/                  # Shared Utilities
?   ??? AppSession.cs           # Session & phân quy?n
?   ??? Res.cs                  # Resource strings
?   ??? PermissionKeys.cs       # H?ng s? phân quy?n
?   ??? UIConstants.cs          # H?ng s? UI
?   ??? ExcelExporter.cs        # Xu?t Excel/HTML
?   ??? WinFormsExtensions.cs   # Extension methods
?
??? ?? App.config               # C?u hình ?ng d?ng
??? ?? Program.cs               # Entry point
??? ?? README.md                # Tài li?u này
```

### ?? Lu?ng x? lý d? li?u

```
???????????     ???????????     ???????????     ???????????     ????????????
?   GUI   ? ??? ?   BUS   ? ??? ?   BLL   ? ??? ?   DAL   ? ??? ? Database ?
? (Forms) ?     ?(Facade) ?     ? (Logic) ?     ? (CRUD)  ?     ?(SQL Svr) ?
???????????     ???????????     ???????????     ???????????     ????????????
     ?               ?               ?               ?
     ?               ?               ?               ?
     ?               ?               ?               ?
  Hi?n th?      Chuy?n ti?p     Validation      Truy c?p
  giao di?n     request         Business rule   database
```

### ?? BusResult Pattern

```csharp
// K?t qu? không có data
BusResult.Ok("Thêm thành công!");
BusResult.Fail("Mã ?ã t?n t?i!");

// K?t qu? có data
BusResult<List<DoUong>>.Ok(data, "T?i thành công!");
BusResult<DoUong>.Fail("Không tìm th?y!");
```

---

## ?? H??ng d?n s? d?ng

### ??ng nh?p

1. Kh?i ??ng ?ng d?ng
2. Nh?p username và password
3. Nh?n "??ng nh?p"

### Qu?n lý ?? u?ng

1. Vào menu **Danh m?c ? ?? u?ng**
2. **Thêm**: Nh?p thông tin ? Nh?n "Thêm"
3. **S?a**: Ch?n dòng ? S?a thông tin ? Nh?n "C?p nh?t"
4. **Xóa**: Ch?n dòng ? Nh?n "Xóa"
5. **Tìm ki?m**: Nh?p t? khóa vào ô tìm ki?m

### Bán hàng

1. Vào menu **Nghi?p v? ? Bán hàng**
2. Ch?n khách hàng (ho?c ?? tr?ng = khách l?)
3. Ch?n s?n ph?m t? danh sách ? Nh?n "Thêm vào gi?"
4. Ki?m tra gi? hàng ? Nh?n "Thanh toán"
5. In hóa ??n n?u c?n

### Báo cáo

1. Vào menu **Báo cáo ? Doanh thu** ho?c **T?n kho**
2. Ch?n kho?ng th?i gian (v?i báo cáo doanh thu)
3. Nh?n "Xem báo cáo"
4. Nh?n "Xu?t Excel" ?? export

---

## ?? C? s? d? li?u

### S? ?? ERD

```
????????????????     ????????????????     ????????????????
?   VaiTro     ?     ?   TaiKhoan   ?     ?   NhanVien   ?
????????????????     ????????????????     ????????????????
? MaVaiTro(PK) ??????? MaVaiTro(FK) ?     ? MaNV (PK)    ?
? TenVaiTro    ?     ? MaTK (PK)    ??????? MaTK (FK)    ?
????????????????     ? Username     ?     ? TenNV        ?
                     ? Password     ?     ? SoDienThoai  ?
                     ????????????????     ????????????????
                                                ?
????????????????     ????????????????           ?
? LoaiDoUong   ?     ?   DoUong     ?           ?
????????????????     ????????????????           ?
? MaLoai (PK)  ??????? MaLoai (FK)  ?           ?
? TenLoai      ?     ? MaDoUong(PK) ?           ?
????????????????     ? TenDoUong    ?           ?
                     ? DonGia       ?           ?
                     ? SoLuongTon   ?           ?
                     ????????????????           ?
                           ?                    ?
????????????????     ????????????????     ????????????????
?  KhachHang   ?     ?   HoaDon     ?     ?ChiTietHoaDon ?
????????????????     ????????????????     ????????????????
? MaKH (PK)    ??????? MaKH (FK)    ?     ? MaHD (FK)    ?
? TenKH        ?     ? MaNV (FK)??????????? MaDoUong(FK) ?
? SoDienThoai  ?     ? MaHD (PK)    ??????? SoLuong      ?
? DiaChi       ?     ? NgayHD       ?     ? DonGia       ?
????????????????     ? TongTien     ?     ? ThanhTien    ?
      ?              ????????????????     ????????????????
      ?
????????????????
?  KyGuiRuou   ?
????????????????
? MaKyGui (PK) ?
? MaKH (FK)    ?
? TenRuou      ?
? NgayKyGui    ?
? HanKyGui     ?
? TrangThai    ?
????????????????
```

### B?ng chính

| B?ng | Mô t? |
|------|-------|
| `VaiTro` | Danh sách vai trò (ADMIN, MANAGER, STAFF, WAREHOUSE) |
| `TaiKhoan` | Tài kho?n ??ng nh?p |
| `NhanVien` | Thông tin nhân viên |
| `LoaiDoUong` | Phân lo?i ?? u?ng |
| `DoUong` | S?n ph?m ?? u?ng |
| `KhachHang` | Thông tin khách hàng |
| `HoaDon` | Hóa ??n bán hàng |
| `ChiTietHoaDon` | Chi ti?t t?ng hóa ??n |
| `KyGuiRuou` | Thông tin ký g?i r??u |

---

## ?? Testing

### Ch?y ?ng d?ng test

```bash
# Build Debug
msbuild QuanLyCuaHangRuou.sln /p:Configuration=Debug

# Ch?y
.\QuanLyCuaHangRuou\bin\Debug\QuanLyCuaHangRuou.exe
```

### Tài kho?n test

| Username | Password | Vai trò |
|----------|----------|---------|
| admin | admin123 | ADMIN |
| manager | 123456 | MANAGER |
| staff01 | 123456 | STAFF |

---

## ?? ?óng góp

Chúng tôi hoan nghênh m?i ?óng góp! Vui lòng:

1. **Fork** repository
2. T?o **branch** m?i (`git checkout -b feature/TinhNangMoi`)
3. **Commit** thay ??i (`git commit -m 'Thêm tính n?ng m?i'`)
4. **Push** lên branch (`git push origin feature/TinhNangMoi`)
5. T?o **Pull Request**

### Quy t?c coding

- Tuân th? ki?n trúc 3-layer
- Comment b?ng ti?ng Vi?t
- ??t tên bi?n/hàm có ý ngh?a
- Validate d? li?u ? BLL layer

---

## ?? License

D? án ???c phân ph?i d??i gi?y phép **MIT License**. Xem file [LICENSE](LICENSE) ?? bi?t thêm chi ti?t.

---

## ?? Tác gi?

- **Terence** - *Phát tri?n chính* - [GitHub](https://github.com/Terence-0310)

---

## ?? Liên h?

- **Email**: contact@example.com
- **Issues**: [GitHub Issues](https://github.com/Terence-0310/QLCuaHang/issues)

---

<div align="center">

**? N?u d? án h?u ích, hãy cho chúng tôi m?t star! ?**

Made with ?? in Vietnam

</div>
